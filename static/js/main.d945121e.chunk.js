(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,t,a){e.exports=a(83)},79:function(e,t,a){},81:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),o=a(15),r=a.n(o),c=a(17),s=a(13),l=a(34),u=a(35),m=a(19),d=a.n(m),p=a(20),h=a(5),g=a(6),f=a(8),v=a(7),k=a(9),b=a(3),y=a(36),O=a.n(y),E=d.a.get("/meeting-time/timezones_abbreviations.json"),j={getTimezones:function(e){var t=e.toLowerCase();return new Promise(function(e,a){E.then(function(a){var n=a.data.filter(function(e){return e.abbr.toLowerCase().indexOf(t)>-1||e.name.toLowerCase().indexOf(t)>-1});e(n)})})}},S="place",W="timezone",N=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).onSourceChange=a.onSourceChange.bind(Object(b.a)(Object(b.a)(a))),a.onSourceSelect=a.onSourceSelect.bind(Object(b.a)(Object(b.a)(a))),a.onSourceBlur=a.onSourceBlur.bind(Object(b.a)(Object(b.a)(a))),a.state={value:"",suggestions:[],lastSource:null,edit:!0},a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"replacePlacesInSuggestions",value:function(e){var t=this.state.suggestions.filter(function(e){return e.type!==S}),a=e.slice(0,5),n=[].concat(Object(p.a)(a),Object(p.a)(t));this.setState({suggestions:n})}},{key:"replaceTimezonesInSuggestions",value:function(e){var t=this.state.suggestions.filter(function(e){return e.type!==W}),a=e.slice(0,5),n=[].concat(Object(p.a)(t),Object(p.a)(a));this.setState({suggestions:n})}},{key:"selectPlace",value:function(e){var t=this,a={placeId:e.original.place_id};new google.maps.places.PlacesService(document.createElement("div")).getDetails(a,function(a){e.original=a,t.props.changeSource(t.props.data,e),t.setState({value:e.original.formatted_address,lastSource:e,edit:!1})})}},{key:"selectTimezone",value:function(e){this.setState({value:e.description,lastSource:e,edit:!1}),this.props.changeSource(this.props.data,e)}},{key:"matchTimezones",value:function(e){var t=this;j.getTimezones(e).then(function(e){var a=e.map(function(e){return{id:e.abbr,original:e,description:"".concat(e.name," - ").concat(e.abbr),name:e.name,details:e.abbr,type:W}});t.replaceTimezonesInSuggestions(a)})}},{key:"matchGoogleAutocompletePlaces",value:function(e){if(!window.google)return!1;var t=this;(new google.maps.places.AutocompleteService).getPlacePredictions({input:e},function(e,a){e||(e=[]);var n=e.map(function(e){var t=e.structured_formatting.secondary_text,a=e.structured_formatting.main_text;return e.structured_formatting.secondary_text&&(a="".concat(a," - ").concat(e.structured_formatting.secondary_text)),!t&&e.types.indexOf("country")>-1&&(t="Country"),{id:e.id,original:e,description:a,name:e.structured_formatting.main_text,details:t,type:S}});t.replacePlacesInSuggestions(n)})}},{key:"onSourceChange",value:function(e){var t=e.target.value;this.setState({value:t}),t.length<3?this.setState({suggestions:[]}):(this.matchGoogleAutocompletePlaces(t),this.matchTimezones(t))}},{key:"onSourceBlur",value:function(){this.setState({value:this.state.lastSource?this.state.lastSource.description:""})}},{key:"onSourceSelect",value:function(e,t){switch(t.type){case S:this.selectPlace(t);break;case W:this.selectTimezone(t);break;default:alert("Source unknown")}}},{key:"onSourceFocus",value:function(e){e.target.select()}},{key:"renderAutocomplete",value:function(){var e=this;if(!this.state.edit)return null;var t=this.props.data,a=t.placeholder,n=t.id,o=this.state.lastSource,r=["source-control","form-control","form-control-lg"];o&&o.description===this.state.value&&r.push("idle");var c=null,s=null;return o&&(s=i.a.createElement("label",{htmlFor:"source_".concat(n)},a),c=i.a.createElement("div",{className:"actions-box"},i.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){e.setState({edit:!1})}},i.a.createElement("i",{className:"fa fa-angle-left","aria-hidden":"true"})," Return"))),i.a.createElement("div",{className:"place-edit"},s,i.a.createElement(O.a,{getItemValue:function(e){return e.id},items:this.state.suggestions,renderItem:function(e,t){return i.a.createElement("div",{className:t?"autocomplete-item highlighted":"autocomplete-item",key:e.id},e.name,i.a.createElement("div",null,i.a.createElement("small",null,e.details)))},inputProps:{id:"source_".concat(n),className:r.join(" "),placeholder:a,onBlur:this.onSourceBlur,onFocus:this.onSourceFocus},renderMenu:function(e,t,a){return e.length?i.a.createElement("div",{className:"autocomplete",children:e}):i.a.createElement("div",{children:e})},wrapperProps:{className:"autocomplete-wrap"},wrapperStyle:{},value:this.state.value,onChange:this.onSourceChange,onSelect:this.onSourceSelect}),c)}},{key:"renderPlaceDisplay",value:function(){var e=this;if(this.state.edit)return null;var t=this.state.lastSource,a=!(!t||!t.timezone)&&0!==t.timezone.dstOffset;return i.a.createElement("div",{className:"place-display",onClick:function(){e.setState({edit:!0})}},i.a.createElement("div",{className:"name"},t.name),i.a.createElement("div",{className:"details"},t.details,a?" (Summer Time)":null," ",i.a.createElement("i",{className:"fa fa-pencil-square-o","aria-hidden":"true"})))}},{key:"render",value:function(){return i.a.createElement("div",{className:"Source"},this.renderAutocomplete(),this.renderPlaceDisplay())}}]),t}(n.Component),C="ADD_MEETING",w="CHANGE_SOURCE",T="CHANGE_TIME",D="CHANGE_HOUR_AND_MINUTE",M="CHANGE_WORKTIME",_="CHANGE_WEEKEND_WORKTIME",z="AIzaSyByEkLOsB5e9YhmsfO9sGkEmw5UcPyxMOQ",A="https://maps.googleapis.com/maps/api/timezone/json";var I=a(21),x=a.n(I),H={source:null,time:x.a.utc(),timezoneOutdated:!1,localTime:null,startWorktime:540,endWorktime:1080,workOnWeekend:!1,isWorktime:null},P=[];function L(e){var t=Object.assign({},H);t.id=e.length+1,t.placeholder="Type a city or timezone ".concat(t.id);var a=e.find(function(e){return null!==e.localTime});a&&(t.time=a.time.clone()),e.push(t)}function G(e){e.isWorktime=!1;var t=e.localTime.minutes()+60*e.localTime.hours(),a=e.localTime.weekday();!e.workOnWeekend&&0===a||!e.workOnWeekend&&6===a||t>=e.startWorktime&&t<=e.endWorktime&&(e.isWorktime=!0)}function Y(e){var t=e.time.clone();t.add(e.source.timezone.rawOffset,"seconds"),t.add(e.source.timezone.dstOffset,"seconds"),e.localTime=t,G(e)}L(P),L(P);Object(u.createLogger)();var B=Object(s.c)({meetings:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case C:return L(e=t.slice()),e;case w:return e=t.map(function(e){return e.id===a.payload.id&&(e.source=a.payload.source,e.timezoneOutdated=!1,Y(e)),e});case T:var n=a.payload.time.clone();return n.subtract(a.payload.source.timezone.rawOffset,"seconds"),n.subtract(a.payload.source.timezone.dstOffset,"seconds"),e=t.map(function(e){return e.time=n.clone(),e.id===a.payload.id?(e.source=a.payload.source,Y(e),e):(e.source&&e.source.type===S&&(e.timezoneOutdated=!0),e.source&&Y(e),e)});case D:return e=t.map(function(e){var t=e.time.clone();return t[a.payload.type](a.payload.minutes,"minutes"),e.time=t,e.localTime&&Y(e),e});case M:return e=t.map(function(e){return e.id===a.payload.id&&(e[a.payload.type]=a.payload.minutes,G(e)),e});case _:return e=t.map(function(e){return e.id===a.payload.id&&(e.workOnWeekend=a.payload.status,G(e)),e});default:return t}}}),F={};var R=a(40),q=(a(77),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a.state={time:null,updatingLocalTime:!1},a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"onChange",value:function(e){var t=x()(e);t.hours(this.state.time.hours()).minutes(this.state.time.minutes()),this.setState({time:t}),this.props.changeTime(this.props.data,t)}},{key:"componentWillReceiveProps",value:function(e){if(e.data.timezoneOutdated&&e.data.source&&!this.state.updatingLocalTime)return this.setState({updatingLocalTime:!0}),void e.changeSource(e.data,e.data.source);this.setState({time:this.props.data.localTime.clone(),updatingLocalTime:!1})}},{key:"componentWillMount",value:function(){this.setState({time:this.props.data.localTime.clone()})}},{key:"render",value:function(){var e=this.props.data.localTime,t=this.state.time;if(!e)return null;var a=["form-control","form-control-lg","Date"];return this.state.updatingLocalTime&&a.push("disabled"),i.a.createElement("div",null,i.a.createElement("label",null,"Date"),i.a.createElement(R.a,{customInput:i.a.createElement("div",null,t.format("ddd DD, MMM YYYY")),selected:this.state.time.toDate(),onChange:this.onChange,className:a.join(" ")}))}}]),t}(n.Component)),U=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).onChange=a.onChange.bind(Object(b.a)(Object(b.a)(a))),a.state={time:null,updatingLocalTime:!1},a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"onChange",value:function(e){var t=e.target.value.split(":"),a=this.state.time.clone();a.hours(parseInt(t[0],10)).minutes(parseInt(t[1],10));var n=a.diff(this.state.time),i=n<0?"subtract":"add";0!==n&&this.props.changeHourAndMinute(i,Math.abs(n/60/1e3))}},{key:"componentWillReceiveProps",value:function(){this.setState({time:this.props.data.localTime.clone(),updatingLocalTime:!1})}},{key:"componentWillMount",value:function(){this.setState({time:this.props.data.localTime.clone()})}},{key:"render",value:function(){var e=this.props.data.localTime,t=this.state.time;if(!e)return null;var a=["form-control","form-control-lg","HourAndMinute"];return this.state.updatingLocalTime&&a.push("disabled"),i.a.createElement("div",null,i.a.createElement("label",null,"Time"),i.a.createElement("input",{type:"time",className:a.join(" "),onChange:this.onChange,value:t.format("HH:mm"),required:!0}))}}]),t}(n.Component),K=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=["MeetingTimeDisplay","col-12","col-md-6"],t="This time is out of worktime";return this.props.meetingData.isWorktime&&(e.push("worktime"),t="This time is on worktime"),i.a.createElement("div",{className:e.join(" ")},i.a.createElement("div",{className:"time-box",onClick:this.props.onClick},i.a.createElement("div",{className:"hour-and-minute",title:t},i.a.createElement("span",{className:"worktime-display"}),this.props.meetingData.localTime.format("HH:mm")),i.a.createElement("div",{className:"date"},i.a.createElement("i",{className:"fa fa-pencil-square-o d-none d-sm-inline-block","aria-hidden":"true"})," ",this.props.meetingData.localTime.format("ddd DD, MMM YYYY")," ",i.a.createElement("i",{className:"fa fa-pencil-square-o d-sm-none","aria-hidden":"true"}))))}}]),t}(n.Component);function J(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";"string"!==typeof e&&(e=String(e));for(var n=e.length;n<t;n++)e=a+e;return e}function Q(e){var t=Math.floor(e/60),a=Math.floor(e%60),n=J(t,2),i=J(a,2);return"".concat(n,":").concat(i)}function V(e){var t=e.split(":"),a=parseInt(t[0],10);return parseInt(t[1],10)+60*a}var X=function(e){var t=e.data,a=t.isWorktime,n=t.startWorktime,o=t.endWorktime;return a?null:i.a.createElement("div",{className:"alert alert-danger"},"This time is out of working time (".concat(Q(n)," ~ ").concat(Q(o),")"))},Z=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).onStartWorktimeChange=a.onStartWorktimeChange.bind(Object(b.a)(Object(b.a)(a))),a.onEndWorktimeChange=a.onEndWorktimeChange.bind(Object(b.a)(Object(b.a)(a))),a.onWeekendChange=a.onWeekendChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"onStartWorktimeChange",value:function(e){this.props.changeWorktime(this.props.data.id,"startWorktime",V(e.target.value))}},{key:"onEndWorktimeChange",value:function(e){this.props.changeWorktime(this.props.data.id,"endWorktime",V(e.target.value))}},{key:"onWeekendChange",value:function(e){this.props.changeWeekendWorktime(this.props.data.id,e.target.checked)}},{key:"render",value:function(){var e=this.props.data,t=e.startWorktime,a=e.endWorktime,n=e.workOnWeekend;return this.props.show?i.a.createElement("div",{className:"row WorktimeConfig"},i.a.createElement("div",{className:"col-12 col-sm-6"},i.a.createElement("label",null,"Start Worktime"),i.a.createElement("input",{type:"time",className:"form-control",onChange:this.onStartWorktimeChange,value:Q(t),required:!0})),i.a.createElement("div",{className:"col-12 col-sm-6"},i.a.createElement("label",null,"End Worktime"),i.a.createElement("input",{type:"time",className:"form-control",onChange:this.onEndWorktimeChange,value:Q(a),required:!0})),i.a.createElement("div",{className:"col-12 weekend-config"},i.a.createElement("div",{className:"form-check"},i.a.createElement("label",{className:"form-check-label",htmlFor:"weekend_config_switch"},i.a.createElement("input",{type:"checkbox",id:"weekend_config_switch",className:"form-check-input",onChange:this.onWeekendChange,checked:n})," Work on weekend")))):null}}]),t}(n.Component),$=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(f.a)(this,Object(v.a)(t).call(this,e))).state={editDate:!1,editWorktime:!1},a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"renderTimeDisplay",value:function(){var e=this;return this.state.editDate?i.a.createElement("div",{className:"col-12 col-md-6 meeting-time-edit"},i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12 col-md-6"},i.a.createElement(q,{data:this.props.meetingData,changeTime:this.props.changeTime,changeSource:this.props.changeSource})),i.a.createElement("div",{className:"col-12 col-md-6"},i.a.createElement(U,{data:this.props.meetingData,changeHourAndMinute:this.props.changeHourAndMinute})),i.a.createElement("div",{className:"col-12 worktime-box"},i.a.createElement(X,{data:this.props.meetingData}),i.a.createElement(Z,{data:this.props.meetingData,changeWeekendWorktime:this.props.changeWeekendWorktime,changeWorktime:this.props.changeWorktime,workOnWeekend:this.props.workOnWeekend,show:this.state.editWorktime})),i.a.createElement("div",{className:"col-12 actions-box"},i.a.createElement("button",{className:"btn btn-sm btn-info",onClick:function(){e.setState({editWorktime:!e.state.editWorktime})}},i.a.createElement("i",{className:"fa fa-cog","aria-hidden":"true"})," Change worktime"),i.a.createElement("button",{className:"btn btn-sm btn-success",onClick:function(){e.setState({editDate:!1,editWorktime:!1})}},i.a.createElement("i",{className:"fa fa-check","aria-hidden":"true"})," Apply")))):i.a.createElement(K,{meetingData:this.props.meetingData,onClick:function(){e.setState({editDate:!0})}})}},{key:"render",value:function(){var e=["col-12"],t=null!==this.props.meetingData.source;return t&&e.push("col-md-6"),i.a.createElement("div",{className:"list-group-item Meeting"},i.a.createElement("div",{className:"row",style:{flex:1}},i.a.createElement("div",{className:e.join(" ")},i.a.createElement(N,{data:this.props.meetingData,changeSource:this.props.changeSource})),t?this.renderTimeDisplay():null))}}]),t}(n.Component),ee=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(g.a)(t,[{key:"renderMeeting",value:function(e){return i.a.createElement($,{key:e.id,meetingData:e,changeSource:this.props.changeSource,changeTime:this.props.changeTime,changeHourAndMinute:this.props.changeHourAndMinute,changeWorktime:this.props.changeWorktime,changeWeekendWorktime:this.props.changeWeekendWorktime})}},{key:"render",value:function(){return i.a.createElement("div",{className:"meeting"},i.a.createElement("div",{className:"list-group"},this.props.meetings.map(this.renderMeeting.bind(this))))}}]),t}(n.Component);var te=Object(c.b)(function(e){return{meetings:e.meetings}},{changeSource:function(e,t){switch(t.type){case S:var a="".concat(A,"?key=").concat(z,"&location=").concat(t.original.geometry.location.lat(),",").concat(t.original.geometry.location.lng(),"&timestamp=").concat(e.time.unix());return function(n){d.a.get(a).then(function(a){t.timezone=a.data,n({type:w,payload:{id:e.id,source:t}})})};case W:return t.timezone={rawOffset:t.original.rawOffset,dstOffset:t.original.dstOffset},{type:w,payload:{id:e.id,source:t}};default:return{type:w,payload:{id:e.id,source:t}}}},changeTime:function(e,t){var a=e.source;switch(a.type){case S:var n="".concat(A,"?key=").concat(z,"&location=").concat(a.original.geometry.location.lat(),",").concat(a.original.geometry.location.lng(),"&timestamp=").concat(t.unix());return function(i){d.a.get(n).then(function(n){a.timezone=n.data,i({type:T,payload:{id:e.id,source:a,time:t}})})};default:return{type:T,payload:{id:e.id,source:a,time:t}}}},changeHourAndMinute:function(e,t){return{type:D,payload:{type:e,minutes:t}}},changeWorktime:function(e,t,a){return{type:M,payload:{id:e,type:t,minutes:a}}},changeWeekendWorktime:function(e,t){return{type:_,payload:{id:e,status:t}}}})(ee),ae=function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"add-meeting"},i.a.createElement("button",{className:"btn btn-primary",onClick:this.props.addMeeting},i.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})))}}]),t}(n.Component),ne=Object(c.b)(null,{addMeeting:function(){return{type:C}}})(ae),ie=(a(79),a(81),function(e){function t(){return Object(h.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"container"},i.a.createElement("h1",{className:"app-title"},"Find the best meeting time"),i.a.createElement(te,null),i.a.createElement(ne,null),i.a.createElement("footer",null,"Made by ",i.a.createElement("a",{href:"https://www.linkedin.com/in/aboutfelipelima/"},"Felipe Lima")," | ",i.a.createElement("a",{href:"https://github.com/fill-lima/meeting-time"},"Github"))))}}]),t}(n.Component)),oe=Object(s.e)(B,F,Object(s.d)(Object(s.a)(l.a),function(e){return e}));r.a.render(i.a.createElement(c.a,{store:oe},i.a.createElement(ie,null)),document.getElementById("root"))}},[[41,2,1]]]);
//# sourceMappingURL=main.d945121e.chunk.js.map